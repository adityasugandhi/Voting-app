{"changed":true,"filter":false,"title":"suffragist.rb","tooltip":"/suffragist.rb","value":"require 'sinatra'\nrequire 'yaml/store'\n\nget '/' do\n   @title = 'Welcome to the Suffragist!'\n   erb :index\nend\nChoices = {\n  'HAM' => 'Hamburger',\n  'PIZ' => 'Pizza',\n  'CUR' => 'Curry',\n  'NOO' => 'Noodles',\n  }\n\npost '/cast' do\n  @title = 'Thanks for casting your vote!'\n  @vote  = params['vote']\n  @store = YAML::Store.new 'votes.yml'\n  @store.transaction do\n    @store['votes'] ||= {}\n    @store['votes'][@vote] ||= 0\n    @store['votes'][@vote] += 1\n  end\n  erb :cast\nend\n\nget '/results' do\n  @title = 'Results so far:'\n  @store = YAML::Store.new 'votes.yml'\n  @votes = @store.transaction { @store['votes'] }\n  erb :results\nend","undoManager":{"mark":27,"position":29,"stack":[[{"start":{"row":0,"column":0},"end":{"row":4,"column":3},"action":"insert","lines":["require 'sinatra'","","get '/' do","  'Hello, voter!'","end"],"id":1}],[{"start":{"row":4,"column":3},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":4,"column":0},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":3,"column":17},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":4,"column":0},"end":{"row":4,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":3,"column":17},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":4,"column":0},"end":{"row":4,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":4,"column":2},"end":{"row":9,"column":1},"action":"insert","lines":["Choices = {","  'HAM' => 'Hamburger',","  'PIZ' => 'Pizza',","  'CUR' => 'Curry',","  'NOO' => 'Noodles',","}"],"id":10}],[{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"remove","lines":["}"],"id":11},{"start":{"row":8,"column":21},"end":{"row":9,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":8,"column":21},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":12},{"start":{"row":9,"column":0},"end":{"row":9,"column":2},"action":"insert","lines":["  "]},{"start":{"row":9,"column":2},"end":{"row":9,"column":3},"action":"insert","lines":["}"]}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":17},"action":"remove","lines":["'Hello, voter!'"],"id":13}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":12},"action":"insert","lines":["erb :index"],"id":14}],[{"start":{"row":4,"column":2},"end":{"row":9,"column":3},"action":"remove","lines":["Choices = {","  'HAM' => 'Hamburger',","  'PIZ' => 'Pizza',","  'CUR' => 'Curry',","  'NOO' => 'Noodles',","  }"],"id":15}],[{"start":{"row":6,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["",""],"id":16},{"start":{"row":5,"column":2},"end":{"row":6,"column":0},"action":"remove","lines":["",""]},{"start":{"row":5,"column":1},"end":{"row":5,"column":2},"action":"remove","lines":[" "]},{"start":{"row":5,"column":0},"end":{"row":5,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":4,"column":2},"end":{"row":5,"column":0},"action":"remove","lines":["",""],"id":17},{"start":{"row":4,"column":1},"end":{"row":4,"column":2},"action":"remove","lines":[" "]},{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":[" "]},{"start":{"row":3,"column":12},"end":{"row":4,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":3,"column":12},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":18},{"start":{"row":4,"column":0},"end":{"row":4,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":4,"column":1},"end":{"row":4,"column":2},"action":"remove","lines":[" "],"id":19},{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":4,"column":3},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":20}],[{"start":{"row":5,"column":0},"end":{"row":10,"column":3},"action":"insert","lines":["Choices = {","  'HAM' => 'Hamburger',","  'PIZ' => 'Pizza',","  'CUR' => 'Curry',","  'NOO' => 'Noodles',","  }"],"id":21}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":12},"action":"remove","lines":["erb :index"],"id":22},{"start":{"row":3,"column":2},"end":{"row":4,"column":12},"action":"insert","lines":[" @title = 'Welcome to the Suffragist!'","  erb :index"]}],[{"start":{"row":4,"column":1},"end":{"row":4,"column":2},"action":"remove","lines":[" "],"id":23},{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"remove","lines":[" "]},{"start":{"row":3,"column":40},"end":{"row":4,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":3,"column":40},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":24},{"start":{"row":4,"column":0},"end":{"row":4,"column":3},"action":"insert","lines":["   "]}],[{"start":{"row":12,"column":0},"end":{"row":13,"column":0},"action":"insert","lines":["",""],"id":25}],[{"start":{"row":13,"column":0},"end":{"row":17,"column":3},"action":"insert","lines":["post '/cast' do","  @title = 'Thanks for casting your vote!'","  @vote  = params['vote']","  erb :cast","end"],"id":26}],[{"start":{"row":17,"column":3},"end":{"row":18,"column":0},"action":"insert","lines":["",""],"id":27},{"start":{"row":18,"column":0},"end":{"row":19,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":19,"column":0},"end":{"row":22,"column":3},"action":"insert","lines":["get '/results' do","  @votes = { 'HAM' => 7, 'PIZ' => 5, 'CUR' => 3 }","  erb :results","end"],"id":28}],[{"start":{"row":0,"column":17},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":29}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":20},"action":"insert","lines":["require 'yaml/store'"],"id":30}],[{"start":{"row":20,"column":0},"end":{"row":23,"column":3},"action":"remove","lines":["get '/results' do","  @votes = { 'HAM' => 7, 'PIZ' => 5, 'CUR' => 3 }","  erb :results","end"],"id":31},{"start":{"row":20,"column":0},"end":{"row":25,"column":3},"action":"insert","lines":["get '/results' do","  @title = 'Results so far:'","  @store = YAML::Store.new 'votes.yml'","  @votes = @store.transaction { @store['votes'] }","  erb :results","end"]}],[{"start":{"row":14,"column":0},"end":{"row":18,"column":3},"action":"remove","lines":["post '/cast' do","  @title = 'Thanks for casting your vote!'","  @vote  = params['vote']","  erb :cast","end"],"id":32},{"start":{"row":14,"column":0},"end":{"row":24,"column":3},"action":"insert","lines":["post '/cast' do","  @title = 'Thanks for casting your vote!'","  @vote  = params['vote']","  @store = YAML::Store.new 'votes.yml'","  @store.transaction do","    @store['votes'] ||= {}","    @store['votes'][@vote] ||= 0","    @store['votes'][@vote] += 1","  end","  erb :cast","end"]}],[{"start":{"row":24,"column":3},"end":{"row":24,"column":4},"action":"insert","lines":["c"],"id":33},{"start":{"row":24,"column":4},"end":{"row":24,"column":5},"action":"insert","lines":["o"]},{"start":{"row":24,"column":5},"end":{"row":24,"column":6},"action":"insert","lines":["m"]}],[{"start":{"row":24,"column":5},"end":{"row":24,"column":6},"action":"remove","lines":["m"],"id":34},{"start":{"row":24,"column":4},"end":{"row":24,"column":5},"action":"remove","lines":["o"]},{"start":{"row":24,"column":3},"end":{"row":24,"column":4},"action":"remove","lines":["c"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":24,"column":3},"end":{"row":24,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1583499474379}